<%- include("../partials/header.ejs") %> <%- include("../partials/navbar.ejs")
%>
<main class="container">
  <% if (locals._id) { %>
  <h1 class="title is-1">Update Game Info</h1>
  <form action=<%- `/games/update-game/${_id}?_method=PUT` %>
  enctype="multipart/form-data" method="post"> <% } else { %>
  <h1 class="title is-1">Add Game Form</h1>
  <form action="/games/new-game" enctype="multipart/form-data" method="post">
    <% } %>
    <div class="field">
      <label for="name" class="label">Name</label>
      <div class="control">
        <!-- prettier-ignore -->
        <input
          type="text"
          class="input"
          id="name"
          name="name"
          <% if (locals.name) { %>
        value="<%= name %>" <% } %> />
      </div>
    </div>
    <div class="field">
      <label for="genre" class="label">Genre</label>
      <div class="control">
        <!-- prettier-ignore -->
        <input
          type="text"
          class="input"
          id="genre"
          name="genre"
          <% if (locals.genre) { %>
        value="<%= genre %>" <% } %> />
      </div>
    </div>
    <div class="field">
      <div class="file has-name">
        <label class="file-label">
          <!-- prettier-ignore -->
          <input
            class="file-input"
            type="file"
            name="image"
            accept="image/png, image/jpeg"
            <% if (!locals._id) { %>
          required <% } %> />
          <span class="file-cta">
            <span class="file-icon">
              <i class="fas fa-upload"></i>
            </span>
            <span class="file-label"> Choose an imageâ€¦ </span>
          </span>
          <span class="file-name"> No file uploaded </span>
        </label>
      </div>
    </div>
    <div class="field is-grouped is-justify-content-space-between">
      <div class="control">
        <button class="button is-primary" type="submit">
          <strong>Submit</strong>
        </button>
      </div>
      <% if (locals._id) { %>
      <div class="control">
        <button
          type="button"
          data-target="delete-modal"
          class="button modal-button is-danger"
        >
          <strong>Delete</strong>
        </button>
      </div>
      <% } %>
    </div>
  </form>
  <% if (locals._id) { %> <%- include("../partials/modal.ejs", { type: "game",
  _id }) %> <% } %>
</main>
<script src="/js/photoUpload.js"></script>
<%- include("../partials/footer.ejs") %>
