<%- include("../partials/header.ejs") %> <%- include("../partials/navbar.ejs")
%>
<main class="container">
  <h1 class="title is-1">Review Form</h1>
  <% if (_id) { %>
    <form action=<%= `/reviews/update-review/${_id}?_method=PUT` %> method="post">
  <% } else { %>
    <form action=<%= `/reviews/new-review/${gameId}` %> method="post">
  <% } %>
    <div class="field">
      <label for="rating" class="label">Rating</label>
      <div class="control">
          <div class="select">
            <select name="rating" id="rating">
                <option value="Unrated" <%- rating === "Unrated" ? "selected=selected" : "" %>>Unrated</option>
                <option value="Did Not Like" <%- rating === "Did Not Like" ? "selected=selected" : "" %>>Did Not Like</option>
                <option value="It Was OK" <%- rating === "It Was OK" ? "selected=selected" : "" %>>It Was OK</option>
                <option value="Liked It" <%- rating === "Liked It" ? "selected=selected" : "" %>>Liked It</option>
                <option value="Really Liked It" <%- rating === "Really Liked It" ? "selected=selected" : "" %>>Really Liked It</option>
                <option value="Loved It" <%- rating === "Loved It" ? "selected=selected" : "" %>>Loved It</option>
            </select>
          </div>
      </div>
    </div>
    <div class="field">
      <label for="completed" class="label">Completed</label>
      <div class="control">
          <div class="select">
            <select name="completed" id="completed">
              <% for (let value of completedValues) { %>
                <option value=<%= value %> <%- value === completed ? "selected=selected" : "" %>><%= value %></option>
              <% } %>
            </select>
          </div>
      </div>
    </div>
    <div class="field">
        <label for="body" class="label">Review Text</label>
        <div class="control">
            <textarea name="body" id="" cols="30" rows="10" class="textarea"><%- body %></textarea>
        </div>
    </div>
    <button class="button is-primary" type="submit">
      <strong>Submit</strong>
    </button>
  </form>
  <% if (_id) { %>
 <button data-target="delete-modal" class="button delete-button is-danger"><strong>Delete</strong></button>
  <div id="delete-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="box">
        <h2 class="title">Are you sure you want to delete this review?</h2>
        <div class="buttons">
          <form action=<%- `/reviews/delete-review/${_id}?_method=DELETE` %> method="post">
            <button class="button is-danger">
              <strong>Yes</strong>
            </button>
          </form>
          <button class="button no-button"><strong>No</strong></button>
        </div>
      </div>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
  </div>
  <% } %>
</main>
<%- include("../partials/footer.ejs") %>
